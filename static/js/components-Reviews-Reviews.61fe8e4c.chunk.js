"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[459,44,414],{186:function(t,n,e){e.r(n),e.d(n,{default:function(){return o}});var i=e(2791),r=e(4567),a=e(559),s=e(184);function o(t){var n=r.theMovieDbApi.lazyGet("movie/".concat(t.urlParams.movieId,"/reviews"));return n.results&&0!==n.results.length?(0,s.jsx)(a.Wrapper,{children:n.results.map((function(t){return(0,s.jsxs)("li",{children:[(0,s.jsx)(a.Author,{children:t.author}),(0,s.jsx)(a.Text,{children:u(t.content)}),(t.updated_at||t.created_at)&&(0,s.jsx)(a.Timestamp,{children:h(t.updated_at||t.created_at)})]},t.id)}))}):(0,s.jsx)("p",{children:"We don't have any reviews for this movie."})}var u=function(t){var n=/^https?:\/\/[a-z0-9_%#./-]*$/i,e=/^\*\*[^*]+\*\*$/i,r=/^_[^_]+_$/i;return t.split(/(https?:\/\/[a-z0-9_%#./-]*|\*\*[^*]+\*\*|_[^_]+_)/gi).map((function(t,a){var o=t;return t.match(n)?o=(0,s.jsx)("a",{href:t,onFocus:function(t){t.stopPropagation()},target:"_blank",rel:"noreferrer",children:t}):t.match(e)?o=(0,s.jsx)("b",{children:t.substring(2,t.length-2)}):t.match(r)&&(o=(0,s.jsx)("i",{children:t.substring(1,t.length-1)})),(0,s.jsx)(i.Fragment,{children:o},a)}))};function h(t){if(t=new Date(t))return t.toLocaleString("en-us",{day:"numeric",month:"long",year:"numeric"})}},559:function(t,n,e){e.r(n),e.d(n,{Author:function(){return c},Text:function(){return l},Timestamp:function(){return d},Wrapper:function(){return h}});var i,r,a,s,o=e(168),u=e(6031),h=u.default.ul(i||(i=(0,o.Z)(["\n  width: 760px;\n\n  list-style: none;\n  padding-left: 0;\n\n  @media (min-width: 1580px) {\n    column-count: 2;\n    width: calc(760px * 2 + 10px);\n    column-gap: 10px;\n  }\n\n  & li {\n    background-color: white;\n    padding: 1em;\n    border-radius: 5px;\n    box-shadow: 0 5px 7px -5px #0005;\n    margin-bottom: 10px;\n    break-inside: avoid-column;\n    overflow: hidden;\n  }\n"]))),c=u.default.h3(r||(r=(0,o.Z)(["\n  margin-top: 0;\n"]))),l=u.default.div(a||(a=(0,o.Z)(["\n  column-count: 2;\n  column-rule: 1px solid lightblue;\n  white-space: break-spaces;\n"]))),d=u.default.div(s||(s=(0,o.Z)(["\n  text-align: right;\n  font-style: italic;\n  font-size: 0.8em;\n\n  opacity: 0.5;\n\n  margin-top: 10px;\n"])))},4567:function(t,n,e){e.r(n),e.d(n,{theMovieDbApi:function(){return c}});var i=e(5861),r=e(8683),a=e(5671),s=e(3144),o=e(7757),u=e.n(o),h=function(){function t(){(0,a.Z)(this,t),this.url="https://api.themoviedb.org/3/",this.cache={},this.configuration={images:{base_url:"http://image.tmdb.org/t/p/",secure_base_url:"https://image.tmdb.org/t/p/",backdrop_sizes:["w300","w780","w1280","original"],logo_sizes:["w45","w92","w154","w185","w300","w500","original"],poster_sizes:["w92","w154","w185","w342","w500","w780","original"],profile_sizes:["w45","w185","h632","original"],still_sizes:["w92","w185","w300","original"]}},this.DESIRED_POSTER_SIZE={width:240,height:356},this.DESIRED_PORTRAIT_SIZE={width:100,height:150},this.parameters={},this.loadConfiguration()}return(0,s.Z)(t,[{key:"findBestTag",value:function(t,n){var e=n.width,i=void 0===e?0:e,r=n.height,a=void 0===r?0:r;if(i+a===0)return"original";var s={w:0,h:0};return t.filter((function(t){return t.startsWith("w")})).map((function(t){return Number.parseInt(t.substring(1))})).sort((function(t,n){return n-t})).forEach((function(t){(0===s.w||t>i&&Math.abs(i-t)<Math.abs(i-s.w))&&(s.w=t)})),t.filter((function(t){return t.startsWith("h")})).sort((function(t,n){return n-t})).map((function(t){return Number.parseInt(t.substring(1))})).forEach((function(t){(0===s.h||t>a&&Math.abs(a-t)<Math.abs(a-s.h))&&(s.h=t)})),Math.abs(a-s.h)<Math.abs(i-s.w)?"h"+s.h:"w"+s.w}},{key:"loadConfiguration",value:function(){var t=this;this.get("configuration").then((function(n){t.configuration=(0,r.Z)((0,r.Z)({},t.configuration),n)})).finally((function(){t.buildImageUrls()}))}},{key:"buildImageUrls",value:function(){this.imgUrl=this.configuration.images.secure_base_url,this.posterPath=this.findBestTag(this.configuration.images.poster_sizes,this.DESIRED_POSTER_SIZE)+"/",this.portraitPath=this.findBestTag(this.configuration.images.profile_sizes,this.DESIRED_PORTRAIT_SIZE)+"/"}},{key:"buildRequestString",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e="?"+new URLSearchParams((0,r.Z)((0,r.Z)((0,r.Z)({},this.parameters),n),{},{api_key:"dcc9bedd4e44c237d701363380ef9ebd"}));return this.url+t+e}},{key:"createFetchPromise",value:function(t){return new Promise(function(){var n=(0,i.Z)(u().mark((function n(e){var i,r;return u().wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,window.fetch(t);case 2:return i=n.sent,n.next=5,i.json();case 5:r=n.sent,e(r);case 7:case"end":return n.stop()}}),n)})));return function(t){return n.apply(this,arguments)}}())}},{key:"get",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,i=this.buildRequestString(t,n);if(!this.cache[i]){var r=this.createFetchPromise(i);this.cache[i]=e?new l(r):r}return e?this.cache[i].read():this.cache[i]}},{key:"lazyGet",value:function(t,n){return this.get(t,n,!0)}}]),t}(),c=new h,l=function(){function t(n){var e=this;(0,a.Z)(this,t),this.status="pending",this.error=void 0,this.data=void 0,this.promise=null,this.promise=n.then((function(t){e.status="success",e.data=t})).catch((function(t){e.status="error",e.error=t}))}return(0,s.Z)(t,[{key:"read",value:function(){switch(this.status){case"pending":throw this.promise;case"error":throw this.error;default:return this.data}}}]),t}()}}]);
//# sourceMappingURL=components-Reviews-Reviews.61fe8e4c.chunk.js.map