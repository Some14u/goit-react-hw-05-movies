"use strict";(self.webpackChunkgoit_react_hw_05_movies=self.webpackChunkgoit_react_hw_05_movies||[]).push([[403,414],{4567:function(t,i,e){e.r(i),e.d(i,{theMovieDbApi:function(){return c}});var n=e(5861),r=e(8683),s=e(5671),a=e(3144),o=e(7757),h=e.n(o),u=function(){function t(){(0,s.Z)(this,t),this.url="https://api.themoviedb.org/3/",this.cache={},this.configuration={images:{base_url:"http://image.tmdb.org/t/p/",secure_base_url:"https://image.tmdb.org/t/p/",backdrop_sizes:["w300","w780","w1280","original"],logo_sizes:["w45","w92","w154","w185","w300","w500","original"],poster_sizes:["w92","w154","w185","w342","w500","w780","original"],profile_sizes:["w45","w185","h632","original"],still_sizes:["w92","w185","w300","original"]}},this.DESIRED_POSTER_SIZE={width:240,height:356},this.DESIRED_PORTRAIT_SIZE={width:100,height:150},this.parameters={},this.loadConfiguration()}return(0,a.Z)(t,[{key:"findBestTag",value:function(t,i){var e=i.width,n=void 0===e?0:e,r=i.height,s=void 0===r?0:r;if(n+s===0)return"original";var a={w:0,h:0};return t.filter((function(t){return t.startsWith("w")})).map((function(t){return Number.parseInt(t.substring(1))})).sort((function(t,i){return i-t})).forEach((function(t){(0===a.w||t>n&&Math.abs(n-t)<Math.abs(n-a.w))&&(a.w=t)})),t.filter((function(t){return t.startsWith("h")})).sort((function(t,i){return i-t})).map((function(t){return Number.parseInt(t.substring(1))})).forEach((function(t){(0===a.h||t>s&&Math.abs(s-t)<Math.abs(s-a.h))&&(a.h=t)})),Math.abs(s-a.h)<Math.abs(n-a.w)?"h"+a.h:"w"+a.w}},{key:"loadConfiguration",value:function(){var t=this;this.get("configuration").then((function(i){t.configuration=(0,r.Z)((0,r.Z)({},t.configuration),i)})).finally((function(){t.buildImageUrls()}))}},{key:"buildImageUrls",value:function(){this.imgUrl=this.configuration.images.secure_base_url,this.posterPath=this.findBestTag(this.configuration.images.poster_sizes,this.DESIRED_POSTER_SIZE)+"/",this.portraitPath=this.findBestTag(this.configuration.images.profile_sizes,this.DESIRED_PORTRAIT_SIZE)+"/"}},{key:"buildRequestString",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e="?"+new URLSearchParams((0,r.Z)((0,r.Z)((0,r.Z)({},this.parameters),i),{},{api_key:"dcc9bedd4e44c237d701363380ef9ebd"}));return this.url+t+e}},{key:"createFetchPromise",value:function(t){return new Promise(function(){var i=(0,n.Z)(h().mark((function i(e){var n,r;return h().wrap((function(i){for(;;)switch(i.prev=i.next){case 0:return i.next=2,window.fetch(t);case 2:return n=i.sent,i.next=5,n.json();case 5:r=i.sent,e(r);case 7:case"end":return i.stop()}}),i)})));return function(t){return i.apply(this,arguments)}}())}},{key:"get",value:function(t){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},e=arguments.length>2?arguments[2]:void 0,n=this.buildRequestString(t,i);if(!this.cache[n]){var r=this.createFetchPromise(n);this.cache[n]=e?new f(r):r}return e?this.cache[n].read():this.cache[n]}},{key:"lazyGet",value:function(t,i){return this.get(t,i,!0)}}]),t}(),c=new u,f=function(){function t(i){var e=this;(0,s.Z)(this,t),this.status="pending",this.error=void 0,this.data=void 0,this.promise=null,this.promise=i.then((function(t){e.status="success",e.data=t})).catch((function(t){e.status="error",e.error=t}))}return(0,a.Z)(t,[{key:"read",value:function(){switch(this.status){case"pending":throw this.promise;case"error":throw this.error;default:return this.data}}}]),t}()},7052:function(t,i,e){e.r(i),e.d(i,{default:function(){return a}});var n=e(9380),r=e(4567),s=e(184);function a(){var t,i=r.theMovieDbApi.lazyGet("trending/movie/day");return(0,s.jsxs)("section",{children:[(0,s.jsx)("h2",{children:"Trending today"}),(0,s.jsx)("ul",{children:null===(t=i.results)||void 0===t?void 0:t.map((function(t){return(0,s.jsx)("li",{children:(0,s.jsx)(n.ControllerLink,{path:"/movies/".concat(t.id),children:t.title})},t.id)}))})]})}}}]);
//# sourceMappingURL=views-Home.accf66a5.chunk.js.map